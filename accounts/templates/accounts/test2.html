<!DOCTYPE html>
{% load static %}

<html >
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <title>حاسبة السعرات الحرارية</title> -->
    <!--=============== FAVICON ===============-->
    <link
      rel="shortcut icon"
      href="assets/img/logo-2.svg"
      type="image/x-icon"
    />

    <!--=============== REMIXICONS ===============-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    />
    <!-- <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" /> -->
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <style>
      :root {
        --primary: #4a6fa5;
        --secondary: #166088;
        --accent: #4fc3f7;
        --light: #f8f9fa;
        --dark: #343a40;
        --success: #28a745;
        --warning: #ffc107;
        --danger: #dc3545;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Tajawal", sans-serif;
      }

      body {
        background-color: #f5f7fa;
        color: var(--dark);
        line-height: 1.6;
      }

      .containerii {
        max-width: 800px;
        margin: 2rem auto;
        padding: 1.5rem;
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: var(--primary);
        text-align: center;
        margin-bottom: 1.5rem;
        font-weight: 700;
      }

      .tabs {
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
        border-bottom: 1px solid #ddd;
      }

      .tab {
        padding: 0.75rem 1.5rem;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.3s;
      }

      .tab.active {
        border-bottom: 3px solid var(--primary);
        color: var(--primary);
        font-weight: bold;
      }

      .calculator-form {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
      }

      .form-group {
        margin-bottom: 1rem;
      }

      label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }

      input,
      select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
      }

      .activity-level {
        grid-column: span 2;
      }

      .activity-options {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }

      .activity-option {
        padding: 1rem;
        border: 1px solid #ddd;
        border-radius: 8px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
      }

      .activity-option:hover,
      .activity-option.selected {
        border-color: var(--primary);
        background-color: rgba(74, 111, 165, 0.1);
      }

      .buttons {
        grid-column: span 2;
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1rem;
      }

      button {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s;
      }

      .calculate-btn {
        background-color: var(--primary);
        color: white;
      }

      .calculate-btn:hover {
        background-color: var(--secondary);
      }

      .clear-btn {
        background-color: #f8f9fa;
        border: 1px solid #ddd;
      }

      .clear-btn:hover {
        background-color: #e9ecef;
      }

      .results {
        margin-top: 2rem;
        padding: 1.5rem;
        background-color: #f8f9fa;
        border-radius: 10px;
        display: none;
      }

      .results h2 {
        color: var(--primary);
        margin-bottom: 1rem;
        text-align: center;
      }

      .result-item {
        display: flex;
        justify-content: space-between;
        padding: 0.75rem 0;
        border-bottom: 1px solid #eee;
      }

      .result-item:last-child {
        border-bottom: none;
      }

      .result-label {
        font-weight: 500;
      }

      .result-value {
        font-weight: bold;
        color: var(--primary);
      }

      @media (max-width: 768px) {
        .calculator-form {
          grid-template-columns: 1fr;
        }
        .activity-level,
        .buttons {
          grid-column: span 1;
        }
      }
    </style>
    <link rel="stylesheet" href="{% static 'assets/css/styles.css' %}" />
    <title>Omar</title>
  </head>

  <body>
    <!--==================== HEADER ====================-->
   <!--==================== HEADER ====================-->
   <header class="header" id="header">
    <nav class="nav container">
        <a href="{% url 'index' %}" class="nav__logo"><img style="width:75%;" src="{% static 'assets/img/logo-2.svg' %}" alt="" class="logohat"></a>
        <div class="nav__menu" id="nav-menu">
            <ul class="nav__list">
                <li>
                    <a href="{% url 'index' %}" class="nav__link">HOME</a>
                </li>

                <li>
                    <a href="{% url 'about' %}" class="nav__link">ABOUT </a>
                </li>

                <li>
                    <a href="{% url 'index' %}#trans" class="nav__link">TRANSFORMATION</a>
                </li>

                <li>
                    <a href="{% url 'index' %}#testimonial" class="nav__link">
                        TESTIMONIAL
                    </a>
                </li>
                <li>
                    <a href="{% url 'index' %}#menu" class="nav__link">
                        Package
                    </a>
                </li>

                <li>
                    <a href="{% url 'test2' %}" class="nav__link">CALCULATOR</a>
                </li>
            </ul>
            <div class="nav__colse" id="nav-close">
                <i class="ri-close-large-line"></i>
            </div>
        </div>
        <button  type="button" id="openCurrencyMenu" class="btn--rounded-gray">
            <span class="flag-icon" id="currentFlag">
                <img src="{% static 'assets/img/usd.webp' %}" width="20" />
            </span>
            <span class="mx-1.5">|</span>
            <span id="currentCurrency">USD</span>
        </button>
        
        <div class="language-currency-menu popup" id="currencyMenu">
            <div class="menu-header">
                <span style="color: #ff9500;">اختر اللغة والعملة</span>
                <span class="close-btn" id="closeMenu">&times;</span>
            </div>
        
            <div class="menu-options">
                <div class="menu-item" data-lang="ar" data-currency="EGP" data-flag="eg.png">
                    <img src="{% static 'assets/img/eg.png' %}" alt="العلم المصري" class="flag-icon">
                    <span>العربية - الجنيه المصري (EGP)</span>
                </div>
                <div class="menu-item" data-lang="ar" data-currency="SAR" data-flag="saudi.webp">
                    <img src="{% static 'assets/img/saudi.webp' %}" alt="العلم السعودي" class="flag-icon">
                    <span>العربية - الريال السعودي (SAR)</span>
                </div>
                <div class="menu-item" data-lang="ar" data-currency="AED" data-flag="unitearab.webp">
                    <img src="{% static 'assets/img/unitearab.webp' %}" alt="العلم الإماراتي" class="flag-icon">
                    <span>العربية - الدرهم الإماراتي (AED)</span>
                </div>
                <div class="menu-item" data-lang="en" data-currency="USD" data-flag="usd.webp">
                    <img src="{% static 'assets/img/usd.webp' %}" alt="العلم الأمريكي" class="flag-icon">
                    <span>English - US Dollar (USD)</span>
                </div>
            </div>
        </div>


    


          <div class="nav__toggle" id="nav-toggle">
            <i class="ri-apps-2-fill"></i>
          </div>
    </nav>
</header>

    <div class="containerii">
      <h1>حاسبة السعرات الحرارية</h1>

      <div class="tabs">
        <div class="tab active">الوحدات المتريّة</div>
        <div class="tab">الوحدات الأمريكية</div>
      </div>

      <div class="calculator-form">
        <div class="form-group">
          <label for="age">العمر</label>
          <input type="number" id="age" min="15" max="80" value="25" />
        </div>

        <div class="form-group">
          <label for="gender">الجنس</label>
          <select id="gender">
            <option value="male">ذكر</option>
            <option value="female">أنثى</option>
          </select>
        </div>

        <div class="form-group">
          <label for="height">الطول (سم)</label>
          <input type="number" id="height" min="100" max="250" value="180" />
        </div>

        <div class="form-group">
          <label for="weight">الوزن (كجم)</label>
          <input type="number" id="weight" min="30" max="200" value="65" />
        </div>

        <div class="form-group activity-level">
          <label>مستوى النشاط</label>
          <div class="activity-options">
            <div class="activity-option" data-level="1.2">
              <h4>قليل النشاط</h4>
              <p>قليل أو بدون تمارين</p>
            </div>
            <div class="activity-option" data-level="1.375">
              <h4>خفيف</h4>
              <p>تمارين خفيفة 1-3 أيام/أسبوع</p>
            </div>
            <div class="activity-option selected" data-level="1.55">
              <h4>متوسط</h4>
              <p>تمارين متوسطة 3-5 أيام/أسبوع</p>
            </div>
            <div class="activity-option" data-level="1.725">
              <h4>نشيط</h4>
              <p>تمارين شاقة 6-7 أيام/أسبوع</p>
            </div>
            <div class="activity-option" data-level="1.9">
              <h4>نشيط جداً</h4>
              <p>تمارين شاقة يومياً أو عمل بدني</p>
            </div>
          </div>
        </div>

        <div class="buttons">
          <button class="calculate-btn">حساب</button>
          <button class="clear-btn">مسح</button>
        </div>
      </div>

      <div class="results">
        <h2>النتائج</h2>
        <div class="result-item">
          <span class="result-label">الحفاظ على الوزن:</span>
          <span class="result-value" id="maintain">0</span> سعرة/يوم
        </div>
        <div class="result-item">
          <span class="result-label">فقدان وزن خفيف (0.25 كجم/أسبوع):</span>
          <span class="result-value" id="mild-loss">0</span> سعرة/يوم
        </div>
        <div class="result-item">
          <span class="result-label">فقدان وزن (0.5 كجم/أسبوع):</span>
          <span class="result-value" id="weight-loss">0</span> سعرة/يوم
        </div>
        <div class="result-item">
          <span class="result-label">فقدان وزن شديد (1 كجم/أسبوع):</span>
          <span class="result-value" id="extreme-loss">0</span> سعرة/يوم
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll(".tab");
        const activityOptions = document.querySelectorAll(".activity-option");
        const calculateBtn = document.querySelector(".calculate-btn");
        const clearBtn = document.querySelector(".clear-btn");
        const resultsSection = document.querySelector(".results");

        // Tab switching
        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            tabs.forEach((t) => t.classList.remove("active"));
            tab.classList.add("active");
            // Here you would add logic to switch between metric and imperial units
          });
        });

        // Activity level selection
        activityOptions.forEach((option) => {
          option.addEventListener("click", () => {
            activityOptions.forEach((opt) => opt.classList.remove("selected"));
            option.classList.add("selected");
          });
        });

        // Calculate button
        calculateBtn.addEventListener("click", calculateCalories);

        // Clear button
        clearBtn.addEventListener("click", () => {
          document.getElementById("age").value = 25;
          document.getElementById("gender").value = "male";
          document.getElementById("height").value = 180;
          document.getElementById("weight").value = 65;
          activityOptions.forEach((opt) => opt.classList.remove("selected"));
          document
            .querySelector('[data-level="1.55"]')
            .classList.add("selected");
          resultsSection.style.display = "none";
        });

        function calculateCalories() {
          const age = parseInt(document.getElementById("age").value);
          const gender = document.getElementById("gender").value;
          const height = parseInt(document.getElementById("height").value);
          const weight = parseInt(document.getElementById("weight").value);
          const activityLevel = parseFloat(
            document.querySelector(".activity-option.selected").dataset.level
          );

          // Mifflin-St Jeor Equation
          let bmr;
          if (gender === "male") {
            bmr = 10 * weight + 6.25 * height - 5 * age + 5;
          } else {
            bmr = 10 * weight + 6.25 * height - 5 * age - 161;
          }

          const tdee = Math.round(bmr * activityLevel);

          document.getElementById("maintain").textContent = tdee;
          document.getElementById("mild-loss").textContent = Math.round(
            tdee * 0.9
          );
          document.getElementById("weight-loss").textContent = Math.round(
            tdee * 0.79
          );
          document.getElementById("extreme-loss").textContent = Math.round(
            tdee * 0.59
          );

          resultsSection.style.display = "block";
        }
      });
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
          const openBtn = document.getElementById('openCurrencyMenu');
          const closeBtn = document.getElementById('closeMenu');
          const menu = document.getElementById('currencyMenu');
          const menuItems = document.querySelectorAll('.menu-item');
          const currentCurrencyEl = document.getElementById('currentCurrency');
          const currentFlag = document.getElementById('currentFlag');
          const priceEls = document.querySelectorAll('.menu__preci');
      
          const basePrices = {
              package1: 55,
              package2: 97,
              package3: 39
          };
      
          const exchangeRates = {
              USD: 1,
              EGP: 30.9,
              SAR: 3.75,
              AED: 3.67
          };
      
          const flagMap = {
              EGP: 'eg.png',
              SAR: 'saudi.webp',
              AED: 'unitearab.webp',
              USD: 'usd.webp'
          };
      
          function getCurrencyForCountry(countryCode) {
              if (countryCode === 'EG') return 'EGP';
              if (countryCode === 'SA') return 'SAR';
              if (countryCode === 'AE') return 'AED';
              return 'USD';
          }
      
          function setCurrency(currency) {
              currentCurrencyEl.textContent = currency;
              currentFlag.innerHTML = `<img src="/static/assets/img/${flagMap[currency]}" width="20">`;
      
              priceEls.forEach((el, index) => {
                  const packageName = `package${index + 1}`;
                  const usdPrice = basePrices[packageName];
                  const converted = (usdPrice * exchangeRates[currency]).toFixed(2);
                  el.textContent = currency === 'USD' ? `$${usdPrice}` : `${converted} ${currency}`;
              });
          }
      
          fetch('/location/')
              .then(res => res.json())
              .then(data => {
                  const userCountry = data.country || 'US';
                  const currency = getCurrencyForCountry(userCountry);
                  setCurrency(currency);
              })
              .catch(() => {
                  setCurrency('USD');
              });
      
          openBtn.addEventListener('click', () => {
              menu.classList.add('show');
          });
      
          closeBtn.addEventListener('click', () => {
              menu.classList.remove('show');
          });
      
          menuItems.forEach(item => {
              item.addEventListener('click', () => {
                  const currency = item.getAttribute('data-currency');
                  setCurrency(currency);
                  menu.classList.remove('show');
              });
          });
      
          // عرض الأسعار بالدولار مبدئياً
          Object.keys(basePrices).forEach((key, index) => {
              const price = basePrices[key];
              if (priceEls[index]) {
                  priceEls[index].textContent = `$${price}`;
              }
          });
      });
      </script>
      
   
    <script src="{% static 'assets/js/main.js' %}"></script>
  </body>
</html>
